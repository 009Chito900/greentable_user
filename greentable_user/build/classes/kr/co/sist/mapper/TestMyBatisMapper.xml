<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.sist.test">
 <!-- resultMap 조회하는 컬럼과  method(property)를 매핑할 때. -->
 <resultMap type="kr.co.sist.domain.MyBatisDomain" id="mbdResult">
 	<result column="NAME" property="name" />
 	<result column="AGE" property="age" />
 	<result column="ADDR" property="addr" />
 	<result column="IMG" property="img" />
 	<result column="INPUT_DATE" property="input_date" />
 </resultMap>
 
 <!-- test_mybatis 추가 작업 : parameterType에 VO가 입력되기 때문에 #{ getter }  -->
  <insert id="insertMyBatis" parameterType="kr.co.sist.vo.AddMyBatisVO">
  	insert into test_mybatis( name, age, addr, img) values(#{ name }, #{ age }, #{ addr }, #{ img } )
  </insert>
 
 <!-- test_mybatis 조회작업 : resultType 사용 (여러행 조회) -->
 <select id="selectAllTest" resultType="kr.co.sist.domain.MyBatisDomain">
 	select name, age, addr, img, to_char(input_date,'yyyy-mm-dd hh24:mi') input_date
 	from test_mybatis
 </select>
 
 <!-- test_mybatis 조회작업 : resultMap 사용 ( 한 행 조회 ),
     parameterType속성에 정의한 값이 Wrapper Class, 기본형 데이터형, String 인경우 #{ 아무이름을 사용해도 된다. }
 -->
 <select id="selectOneTest" resultMap="mbdResult" parameterType="String">
 	select name, age, addr, to_char(input_date,'yyyy-mm-dd hh24:mi') input_date
 	from test_mybatis
 	where img= #{ img }
 </select>
 
 <!--  삭제작업 -->
 <delete id="deleteTest" parameterType="String">
 	delete from test_mybatis where img=#{ img }
 </delete>

<!-- 변경작업 : parameterType에 typeAlias사용 -->
<update id="updateTest" parameterType="mmbVO">
	update	test_mybatis 
	set		name=#{ name }, addr=#{ addr }, img=#{ updImg }
	where	img=#{ num }
</update>


</mapper>










